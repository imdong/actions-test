name: 定时采集

on:
  schedule:
    - cron: '25 10,22 * * *'
  workflow_dispatch:

jobs:
  snapshot:
    runs-on: ubuntu-latest  # 在 Ubuntu 上运行

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set Timezone
        uses: szenius/set-timezone@v2.0
        with:
          timezoneLinux: "Asia/Shanghai"

      - name: Set up variables
        id: vars
        run: |
          echo "REPO_OWNER=${{ github.repository_owner }}" >> $GITHUB_ENV
          echo "REPO_NAME=${{ github.event.repository.name }}" >> $GITHUB_ENV
  
      - name: Get recent workflow runs
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          curl -s -H "Authorization: Bearer $GITHUB_TOKEN" \
            -H "Accept: application/vnd.github+json" \
            "https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/actions/runs?per_page=10"
  
